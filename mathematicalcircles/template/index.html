{% extends 'include/base.html' %}
{% load static %}
{% load custom_filters %}
{% block header %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.5.8/slick.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.5.8/slick-theme.min.css">
{% endblock header %}
{% block title %}Home{% endblock title %}
{% block body %}

<div class="header-notification d-flex justify-content-around align-items-center">
    <div class="row align-items-center w-90 h-50">
        <div class="col-lg-3 col-md-10 text-center">
            <div class="home-content">
                <div class="title">
                    <h4 class="mb-30 fw-bold">LATEST EXAM NEWS</h4>
                </div>
            </div>
        </div>
        <div class="col-lg-9 h-100">
            <div class="text-center h-100 d-flex align-items-center text-lg-start float-right text-danger" id="second">
                <marquee onmouseover="this.stop();" onmouseout="this.start();">
                    <p>{% for latestnews in latestNews %}
                        {% if latestnews.link %}
                        <span style="width: 10vw; display: inline-block;"></span> <a href="{{latestnews.link}}"
                            target="_blank" rel="noopener noreferrer" title="{{latestnews.link}}">{{latestnews.news}} <i
                                class="fas fa-external-link-square-alt"></i></a>
                        {% else %}
                        <span style="width: 10vw; display: inline-block;"></span> {{latestnews.news}}
                        {% endif %}
                        {% endfor %}
                    </p>
                </marquee>
            </div>
        </div>
    </div>
</div>

<h3 class="mt-4 w-100 ms-5">Sort Resources by Exam</h3>

<section id="exam" class="mt-4">
    <div class="container ml-lg-5">
        <div class="row" id="carousel">
            {% for exam in Exam %}
            <div class="col-md-4 px-3 sort-by-exam">
                <a href="/resources/{{exam.link}}" class="link text-black pointer">
                    <div class="card position-relative justify-content-center border-0 mb-4 shadow-sm row h-15vh">
                        <div class="col-3">
                            <img src="{{exam.image_Link}}" alt="{{exam.exam_Name}}" class="img-fluid">
                        </div>
                        <div class="col-9 h-100 overflow-hidden d-flex flex-column justify-content-center">
                            <div class="">
                                <h5>{{exam|safe|truncatechars:15}}</h5>
                            </div>
                            <div class="">
                                <p class="text-black-50 mb-0">{{ exam | count_matching_resources }} Resources</p>
                            </div>
                        </div>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>
<section class="w-100">
    {% for exam in Exam %}
    <div class="d-flex justify-content-between align-items-center mb-4">
        <div>
            <h3 class="mt-4 w-100 ms-5">{{exam|safe|truncatechars:15}}</h3>
        </div>
        <a href="/resources/{{exam.link}}" class="me-md-5 text-bg-primary btn btn-primary w-6em me-4 ms-3" id="view-all">View All</a>
    </div>
    <div class="d-grid resources-grid ms-md-5">
        {% for res in exam|show_matching_resources %}
        <div class="card shadow-sm border-0">
            <div class="h-80">
                <img src="{{res.resource_Thumbnail}}" alt="{{res.resource_Name}}" class="img-fluid h-100 w-100 cover-top">
            </div>
            <div class="text-center fw-bold d-flex align-items-center overflow-hidden justify-content-center h-20 overflow-ellipsis">
                {{res.resource_Name|safe|truncatechars:22}}
            </div>
        </div>
        {% endfor %}
    </div>
    {% endfor %}
</section>
<link rel="preload" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css" as="style"
    onload="this.onload=null;this.rel='stylesheet'">
<noscript>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css">
</noscript>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"
    integrity="sha512-XtmMtDEcNz2j7ekrtHvOVR4iwwaD6o/FUJe6+Zq+HgcCsk3kj4uSQQR8weQ2QVj1o0Pk6PwYLohm206ZzNfubg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="/static/js/carousel.js"></script>
{% endblock body %}